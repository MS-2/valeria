(this.webpackJsonppwa=this.webpackJsonppwa||[]).push([[0],{194:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),c=a(17),i=a.n(c),u=a(40),s=a(97),m=a(24),d=a(9),p=a(16),f=a.n(p),E=a(44),h=a(11),b=a(107),g=a(74),v=a(102),y=a(4),O=a(101),j=a(55);f.a.defaults.baseURL="http://localhost:4000/";var S=Object(n.createContext)(),w=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(!1),u=Object(d.a)(c,2),s=u[0],p=u[1],E=Object(n.useState)(""),h=Object(d.a)(E,2),b=h[0],g=h[1],v=Object(n.useState)(""),y=Object(d.a)(v,2),O=y[0],j=y[1],w=Object(n.useState)({}),k=Object(d.a)(w,2),C=k[0],x=k[1],I=Object(n.useState)([]),N=Object(d.a)(I,2),J=N[0],L=N[1],A=Object(n.useState)([]),G=Object(d.a)(A,2),R=G[0],W=G[1],_=Object(n.useState)(""),V=Object(d.a)(_,2),B=V[0],P=V[1],D=Object(n.useState)(!0),U=Object(d.a)(D,2),T=U[0],F=U[1],z=Object(n.useState)([]),M=Object(d.a)(z,2),q=M[0],Z=M[1];s&&T&&f.a.get("api/user/"+B).then((function(e){x(e.data),F(!1)})).catch((function(e){console.log("responseERROR"),console.log(e)})),Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("api/company");case 2:return t=e.sent,W(t.data),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),o(!1)}),[l]),Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("api/user");case 2:return t=e.sent,L(t.data),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),o(!1)}),[l]),Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("api/role");case 2:return t=e.sent,console.log("datos rols request",t.data),Z(t.data),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),o(!1)}),[l]);return r.a.createElement(S.Provider,{value:{user:C,setuser:x,id:B,setid:P,err:O,seterr:j,token:b,settoken:g,isAuth:s,setisAuth:p,cleanERROR:function(){j("")},logout:function(){p(!1),g(""),x({}),P("")},users:J,setusers:L,setcompanys:W,setfetch:o,fetch:l,companys:R,rols:q}},e.children)},k=a(23),C=a(32),x=a(205),I=a(204),N=(a(131),a(137),a(139),a(41),Object(h.h)((function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),l=a[0],o=a[1],c=Object(n.useContext)(S),i=c.logout,u=e.history,s=e.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{fixed:!0},r.a.createElement(k.e,null,r.a.createElement(k.f,null,r.a.createElement(k.d,{icon:"menu",onClick:function(){return o(!l)}}),r.a.createElement(k.g,null,"Home Valeria+",JSON.stringify(s.pathname))),r.a.createElement(k.f,{alignEnd:!0},r.a.createElement(k.b,{onClick:function(){return u.push("/")},icon:"home"}),r.a.createElement(k.b,{icon:"settings"})))),r.a.createElement(k.c,null),r.a.createElement(C.a,{modal:!0,open:l,onClose:function(){return o(!1)}},r.a.createElement(C.c,null,r.a.createElement(C.e,null,"Bienvenido : ",c.user.name),r.a.createElement(C.d,null,"correo : ",c.user.email," "),r.a.createElement(C.d,null,"permisos : ",c.user.role," ")),r.a.createElement(C.b,null,r.a.createElement(x.a,null,r.a.createElement(I.a,{onClick:function(){return u.push("/empresa/crear")}},"registrar empresa"),r.a.createElement(I.a,{onClick:function(){return u.push("/usuario/crear")}},r.a.createElement(I.b,{icon:"person"}),"registrar usuario"),r.a.createElement(I.a,{onClick:function(){return u.push("/usuario/lista")}},r.a.createElement(I.b,{icon:"list"}),"lista de usuarios"),r.a.createElement(I.a,{onClick:function(){return i()}},"cerrar sesion")))))}))),J=(a(147),a(149),a(100)),L=function(){var e=Object(n.useContext)(S),t=Object(n.useState)(),a=Object(d.a)(t,2),l=a[0],o=a[1];return r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a,n=new FormData(t.target),r={},l=Object(u.a)(n.entries());try{for(l.s();!(a=l.n()).done;){var c=a.value;r[c[0]]=c[1]}}catch(i){l.e(i)}finally{l.f()}f.a.post("api/auth/signin",r).then((function(t){e.setisAuth(!0),e.settoken(t.data.token);var a=Object(J.a)(t.data.token);e.setid(a.id)})).catch((function(e){o(e.response.data.msg),console.log(e.response.data.msg)}))}},r.a.createElement("input",{type:"email",name:"email",defaultValue:"admin@localhost"}),r.a.createElement("input",{type:"password",name:"pass",autoComplete:"true",defaultValue:"admin"}),r.a.createElement("button",null,"Log In"),l,r.a.createElement("div",null,"hola."))};var A=function(){var e=Object(n.useContext)(S),t={headers:{"x-access-token":e.token}},a=function(){var a=Object(m.a)(i.a.mark((function a(n){var r,l,o,c,m,d;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),l=new FormData(n.target),r=l.entries(),Object(s.a)(r),o=r,c=Object(u.a)(l.entries());try{for(c.s();!(m=c.n()).done;)d=m.value,o[d[0]]=d[1]}catch(i){c.e(i)}finally{c.f()}f.a.post("api/company",{empresa:o},t).then((function(t){console.log("empresa creado : ",t.data);var a=t.data;e.setcompanys(a),e.setfetch(!0)})).catch((function(e){console.log("error"),console.log(e.response.data)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(y.a,{onSubmit:a,style:{width:"90%",margin:25}},r.a.createElement(y.a.Group,{controlId:"name"},r.a.createElement(y.a.Label,null,"Nombre Comercial"),r.a.createElement(y.a.Control,{type:"text",name:"name",placeholder:"Enter name",defaultValue:"origo"})),r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Group,{as:O.a,controlId:"rsocial"},r.a.createElement(y.a.Label,null,"Razon social:"),r.a.createElement(y.a.Control,{type:"text",name:"rsocial",placeholder:"razon social",defaultValue:"chocolates"})),r.a.createElement(y.a.Group,{as:O.a,controlId:"nit"},r.a.createElement(y.a.Label,null,"NIT:"),r.a.createElement(y.a.Control,{type:"text",name:"nit",placeholder:"numero de identificacion tributaria",defaultValue:"123456"}))),r.a.createElement(y.a.Group,{controlId:"direccion"},r.a.createElement(y.a.Label,null,"Direccion"),r.a.createElement(y.a.Control,{type:"text",name:"direccion",placeholder:"1234 Main St",defaultValue:"colpayo 849 piso 1 apt 4"})),r.a.createElement(y.a.Row,null,r.a.createElement(y.a.Group,{as:O.a,controlId:"city"},r.a.createElement(y.a.Label,null,"Ciudad"),r.a.createElement(y.a.Control,{placeholder:"ciudad",name:"city",defaultValue:"buenos aires"})),r.a.createElement(y.a.Group,{as:O.a,controlId:"formGridState"},r.a.createElement(y.a.Label,null,"Estado"),r.a.createElement(y.a.Control,{as:"select",defaultValue:"Choose..."},r.a.createElement("option",null,"Elegir..."),r.a.createElement("option",null,"..."))),r.a.createElement(y.a.Group,{as:O.a,controlId:"formGridZip"},r.a.createElement(y.a.Label,null,"Zip"),r.a.createElement(y.a.Control,{placeholder:"zipcode",name:"zip",defaultValue:"1405"}))),r.a.createElement(y.a.Group,{controlId:"email-e"},r.a.createElement(y.a.Label,null,"Correo Electronico de la Empresa"),r.a.createElement(y.a.Control,{type:"email",placeholder:"Enter email",name:"email-e",defaultValue:"company@gmail.com"}),r.a.createElement(y.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(y.a.Group,{controlId:"Telefono Empresarial"},r.a.createElement(y.a.Label,null,"Telefono Fijo"),r.a.createElement(y.a.Control,{type:"tel",placeholder:"telefono de la empresa",name:"telefono",defaultValue:"1121607577"})),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Guardar")),r.a.createElement("pre",null,JSON.stringify(e.companys,null,2)))},G=function(){var e=Object(n.useContext)(S),t={headers:{"x-access-token":e.token}},a=function(){var a=Object(m.a)(i.a.mark((function a(n){var r,l,o,c,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),r=new FormData(n.target),l={},o=Object(u.a)(r.entries());try{for(o.s();!(c=o.n()).done;)s=c.value,l[s[0]]=s[1]}catch(i){o.e(i)}finally{o.f()}f.a.post("api/user",l,t).then((function(t){e.setfetch(!0),console.log("usuario creado : ",t.data)})).catch((function(e){console.log(e.response.data.message)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),l=function(){var a=Object(m.a)(i.a.mark((function a(n){var r,l,o,c,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),r=new FormData(n.target),l={},o=Object(u.a)(r.entries());try{for(o.s();!(c=o.n()).done;)s=c.value,l[s[0]]=s[1]}catch(i){o.e(i)}finally{o.f()}f.a.post("api/role",l,t).then((function(t){e.setfetch(!0),console.log("rol creado : ",t.data)})).catch((function(e){console.log(e.response)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},r.a.createElement(y.a,{onSubmit:a,style:{width:"50%",margin:15}},r.a.createElement(y.a.Group,{controlId:"name"},r.a.createElement(y.a.Label,null,"primer nombre"),r.a.createElement(y.a.Control,{type:"text",placeholder:"Enter name",name:"name"})),r.a.createElement(y.a.Group,{controlId:"email"},r.a.createElement(y.a.Label,null,"Email address"),r.a.createElement(y.a.Control,{type:"email",placeholder:"Enter email",name:"email"}),r.a.createElement(y.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(y.a.Group,{controlId:"pass"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{type:"password",placeholder:"Password",name:"pass"})),r.a.createElement(y.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(y.a.Check,{type:"checkbox",label:"Check me out"})),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Submit")),r.a.createElement(y.a,{onSubmit:l,style:{width:"25%"}},r.a.createElement(y.a.Group,{controlId:"name"},r.a.createElement(y.a.Label,null,"nombre del rol"),r.a.createElement(y.a.Control,{type:"text",placeholder:"Enter name",name:"name"}),r.a.createElement(y.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(y.a.Group,{controlId:"description"},r.a.createElement(y.a.Label,null,"description"),r.a.createElement(y.a.Control,{type:"text",placeholder:"description",name:"description"})),r.a.createElement(j.a,{variant:"success",type:"submit"},"Submit")),r.a.createElement("div",null,r.a.createElement("pre",null,JSON.stringify(e.users,["_id","email"],1))),r.a.createElement("div",null,r.a.createElement("pre",null,"roles",JSON.stringify(e.rols,["name"],1))))},R=function(e){var t=Object(n.useContext)(S),a=t.companys,l=t.users,o=t.rols,c=e.history;console.log(t);var i=a.map((function(e){return r.a.createElement("button",{key:e._id,style:{margin:5,borderStyle:"solid",backgroundColor:"pink",width:300,height:150}},r.a.createElement("div",{onClick:function(){return c.push("/empresa/"+e._id)}},r.a.createElement("div",null,e.empresa.name),r.a.createElement("div",null,"id : ",e._id)))}));return r.a.createElement("div",null,r.a.createElement("pre",null,r.a.createElement("h1",null,"EMPRESAS"),JSON.stringify(a,["_id","name","empresa","nit"],2)),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},i)),r.a.createElement("pre",null,r.a.createElement("h1",null,"USUARIOS"),JSON.stringify(l,["_id","email"],1)),l[0].users.length>0?r.a.createElement("pre",null,r.a.createElement("h1",null,"USUARIOS"),JSON.stringify(l[0].users,["_id"],1)):r.a.createElement("div",null,"loadin...."),r.a.createElement("pre",null,r.a.createElement("h1",null,"ROLES"),JSON.stringify(o,null,1)))},W=function(){var e=Object(n.useContext)(S).users,t=Object(n.useState)("email"),a=Object(d.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)("_id"),i=Object(d.a)(c,2),u=i[0],s=i[1],m=Object(n.useState)(""),p=Object(d.a)(m,2),f=p[0],h=p[1],b=Object(n.useState)([]),g=Object(d.a)(b,2),y=g[0],O=g[1];Object(n.useEffect)((function(){O(e.filter((function(e){return e.email.includes(f)})))}),[f]);var j=function(){return y.map((function(e,t){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(E.b,{to:"/usuario/lista/"+e._id},e.email)),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e._id)))}))};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"busqueda por email",onChange:function(e){return h(e.target.value)}}),r.a.createElement("input",{type:"checkbox",onChange:function(e){return function(e){o(e?"":"email")}(e.target.checked)}}),r.a.createElement("span",null,"email"),r.a.createElement("input",{type:"checkbox",onChange:function(e){return function(e){s(e?"":"_id")}(e.target.checked)}}),r.a.createElement("span",null,"_id")),r.a.createElement(v.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"nombre"),r.a.createElement("th",null,"agun otro dato"))),r.a.createElement(j,null)),r.a.createElement("pre",null,r.a.createElement("h1",null,"USUARIOS"),JSON.stringify(y,[u,l],1)))};function _(e){var t=Object(n.useContext)(S),a=Object(h.g)().userId,l={headers:{"x-access-token":t.token}},o=e.history,c=Object(n.useState)(!1),u=Object(d.a)(c,2),s=u[0],p=u[1],E=Object(n.useState)({}),v=Object(d.a)(E,2),y=v[0],O=v[1],j=Object(n.useState)(),w=Object(d.a)(j,2),k=w[0],C=(w[1],Object(n.useState)([])),x=Object(d.a)(C,2),I=x[0],N=x[1],J=Object(n.useState)(""),L=Object(d.a)(J,2),A=L[0],G=(L[1],Object(n.useState)(/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent))),R=Object(d.a)(G,2),W=R[0],_=(R[1],Object(n.useState)([])),V=Object(d.a)(_,2),B=(V[0],V[1]);Object(n.useEffect)((function(){B(I.filter((function(e){return e.includes(A)})))}),[A]),Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.get("api/user/"+a).then((function(e){var t=e.data;O(t),N(t.role)})).catch((function(e){console.log(e.response.data)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),p(!1)}),[s]),Object(n.useEffect)((function(){}),[W]);return W?r.a.createElement("div",null,"otra cosa"):r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"}},r.a.createElement("div",{style:{backgroundColor:"red"}},r.a.createElement("h4",null,"usuario: ",JSON.stringify(y.name)),r.a.createElement("h4",null,"usuario: ",JSON.stringify(y.email)),r.a.createElement("h4",null,"usuario: ",JSON.stringify(y._id)),r.a.createElement("h4",null,"usuario: ",JSON.stringify(y.createdAt)),r.a.createElement("button",{onClick:function(){return e=a,console.log(e),void f.a.delete("api/user/"+e,l).then((function(e){o.push("/usuario/lista"),t.setfetch(!0),p(!0)})).catch((function(e){console.log("error")}));var e},style:{backgroundColor:"silver"}},"eliminar")),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"pink"}},r.a.createElement("div",{style:{backgroundColor:"crimson",marginBottom:10}},r.a.createElement("h4",null,"roles: ",JSON.stringify(y.role)),r.a.createElement(g.b,null,I.map((function(e){return r.a.createElement(b.a,{content:e.name},r.a.createElement(g.a,{label:e,onTrailingIconInteraction:function(){return n=e,console.log("he"),void("admin"!==n&&f.a.patch("api/user/remove/"+a,{role:n},l).then((function(e){t.setfetch(!0),console.log("rol eliminado : ",e.data),p(!0)})).catch((function(e){console.log(e.response.data.message)})));var n},trailingIcon:"close"}))}))),r.a.createElement("select",{onChange:function(e){return function(e){f.a.patch("api/user/"+a,{role:e},l).then((function(e){t.setfetch(!0),console.log("usuario actualizado : ",e.data),p(!0)})).catch((function(e){console.log(e.response.data.message)}))}(e.target.value)},value:k},r.a.createElement("option",{disabled:!0,selected:!0,value:!0}," -- select an option -- "),t.rols.map((function(e,t){return r.a.createElement("option",null,e.name)})))),r.a.createElement("div",{style:{backgroundColor:"green",marginBottom:10}},r.a.createElement("h4",null,"relaciones: ",JSON.stringify(y.users,["name"])),r.a.createElement("select",{onChange:function(e){return n=e.target.value,console.log(n),console.log(a),void f.a.patch("api/user/adduser/"+a,{id:n},l).then((function(e){t.setfetch(!0),console.log("usuario actualizado : ",e.data),p(!0)})).catch((function(e){console.log(e.response.data.message)}));var n}},r.a.createElement("option",{disabled:!0,selected:!0,value:!0}," -- select an option -- "),t.users.map((function(e,t){return r.a.createElement("option",{value:e._id},e.name)})))),r.a.createElement("div",{style:{backgroundColor:"yellow"}},r.a.createElement("h4",null,"empresas: ",JSON.stringify(y.companys)),r.a.createElement("h4",null,"empresas: ",JSON.stringify(y,["companys"])))))}function V(){var e=Object(n.useContext)(S),t=Object(h.g)().id;console.log(t);e.token;return r.a.createElement("div",null,"otra cosa")}var B=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=(t[1],Object(n.useContext)(S));return l.isAuth?l.isAuth&&!a?r.a.createElement(E.a,{basename:"/valeria"},r.a.createElement(N,null),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:R}),r.a.createElement(h.b,{exact:!0,path:"/empresa/crear",component:A}),r.a.createElement(h.b,{exact:!0,path:"/usuario/crear",component:G}),r.a.createElement(h.b,{exact:!0,path:"/usuario/lista",component:W}),r.a.createElement(h.b,{path:"/usuario/lista/:userId",children:r.a.createElement(_,null)}),r.a.createElement(h.b,{path:"/empresa/:id",children:r.a.createElement(V,null)}),r.a.createElement(h.b,{component:function(){return r.a.createElement("div",null,"no found")}}))):l.isAuth&&a?r.a.createElement("div",null,"company"):r.a.createElement("div",null,"NotFoundfound"):r.a.createElement(E.a,{basename:"/valeria"},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:L}),r.a.createElement(h.b,{component:function(){return r.a.createElement(h.a,{to:"/"})}})))},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(193);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null,r.a.createElement(B,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){var t=new URL("/valeria",window.location.href);if(console.log(t),t.origin!==window.location.origin)return void console.log("yalhallo");window.addEventListener("load",(function(){var t="".concat("/valeria","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):D(t,e)}))}}()}},[[194,1,2]]]);
//# sourceMappingURL=main.e5153e46.chunk.js.map